name: Notify Slack on Build Failure

on:
    workflow_run:
        workflows: ['Build']
        types:
            - completed

jobs:
    notify:
        if: ${{ github.event.workflow_run.conclusion == 'failure' }}
        runs-on: ubuntu-latest
        steps:
            - name: Send Slack alert
              uses: slackapi/slack-github-action@v1.24.0
              with:
                  channel-id: 'C08M3Q51LJZ'
                  slack-message: |
                      ğŸš¨ *Build Failed!*  
                      ğŸ•’ *Started:* ${{ github.event.workflow_run.run_started_at }}  
                      ğŸ‘¤ *Commit Author:* `${{ github.event.workflow_run.head_commit.author.name }}`  
                      ğŸ’¬ *Commit Message:* `${{ github.event.workflow_run.head_commit.message }}`  
                      ğŸ”— <${{ github.event.workflow_run.html_url }}|View build logs>  
                      ğŸ“˜ *Workflow:* `${{ github.event.workflow_run.name }}`  
                      ğŸ› ï¸ *Repo:* `${{ github.repository }}`  
                      ğŸ“Œ *Branch:* `${{ github.event.workflow_run.head_branch }}`
              env:
                  SLACK_BOT_TOKEN: ${{ secrets.SLACK_BOT_TOKEN }}
